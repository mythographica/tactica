'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.toJSON = void 0;
const extract_1 = require("./extract");
const toJSON = (instance) => {
    const extracted = (0, extract_1.extract)(instance);
    return Object.entries(extracted).reduce((o, entry) => {
        const [name, _value] = entry;
        if ([null, undefined].includes(_value)) {
            return o;
        }
        let value;
        try {
            value = JSON.stringify(_value);
        }
        catch (error) {
            const description = 'This value type is not supported by JSON.stringify';
            const { stack, message } = error;
            value = JSON.stringify({
                description,
                stack,
                message
            });
        }
        o += `"${name}":${value},`;
        return o;
    }, '{')
        .replace(/,$/, '}');
};
exports.toJSON = toJSON;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9KU09OLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL3RvSlNPTi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7OztBQUViLHVDQUFvQztBQUM3QixNQUFNLE1BQU0sR0FBRyxDQUFFLFFBQWdCLEVBQUcsRUFBRTtJQUU1QyxNQUFNLFNBQVMsR0FBRyxJQUFBLGlCQUFPLEVBQUUsUUFBUSxDQUFFLENBQUM7SUFDdEMsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFFLFNBQVMsQ0FBRSxDQUFDLE1BQU0sQ0FBRSxDQUFFLENBQVMsRUFBRSxLQUEwQixFQUFHLEVBQUU7UUFFdEYsTUFBTSxDQUFFLElBQUksRUFBRSxNQUFNLENBQUUsR0FBRyxLQUFLLENBQUM7UUFDL0IsSUFBSyxDQUFFLElBQUksRUFBRSxTQUFTLENBQUUsQ0FBQyxRQUFRLENBQUUsTUFBMEIsQ0FBRSxFQUFHLENBQUM7WUFDbEUsT0FBTyxDQUFDLENBQUM7UUFDVixDQUFDO1FBRUQsSUFBSSxLQUFhLENBQUM7UUFFbEIsSUFBSSxDQUFDO1lBQ0osS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUUsTUFBTSxDQUFFLENBQUM7UUFDbEMsQ0FBQztRQUFDLE9BQVEsS0FBYyxFQUFHLENBQUM7WUFDM0IsTUFBTSxXQUFXLEdBQUcsb0RBQW9ELENBQUM7WUFDekUsTUFBTSxFQUNMLEtBQUssRUFDTCxPQUFPLEVBQ1AsR0FBRyxLQUFjLENBQUM7WUFFbkIsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUU7Z0JBQ3ZCLFdBQVc7Z0JBQ1gsS0FBSztnQkFDTCxPQUFPO2FBQ1AsQ0FBRSxDQUFDO1FBQ0wsQ0FBQztRQUVELENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEdBQUcsQ0FBQztRQUMzQixPQUFPLENBQUMsQ0FBQztJQUVWLENBQUMsRUFBRSxHQUFHLENBQUU7U0FDTixPQUFPLENBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBRSxDQUFDO0FBRXhCLENBQUMsQ0FBQztBQWxDVyxRQUFBLE1BQU0sVUFrQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBleHRyYWN0IH0gZnJvbSAnLi9leHRyYWN0JztcbmV4cG9ydCBjb25zdCB0b0pTT04gPSAoIGluc3RhbmNlOiBvYmplY3QgKSA9PiB7XG5cblx0Y29uc3QgZXh0cmFjdGVkID0gZXh0cmFjdCggaW5zdGFuY2UgKTtcblx0cmV0dXJuIE9iamVjdC5lbnRyaWVzKCBleHRyYWN0ZWQgKS5yZWR1Y2UoICggbzogc3RyaW5nLCBlbnRyeTogWyBzdHJpbmcsIHVua25vd24gXSApID0+IHtcblxuXHRcdGNvbnN0IFsgbmFtZSwgX3ZhbHVlIF0gPSBlbnRyeTtcblx0XHRpZiAoIFsgbnVsbCwgdW5kZWZpbmVkIF0uaW5jbHVkZXMoIF92YWx1ZSBhcyBudWxsIHwgdW5kZWZpbmVkICkgKSB7XG5cdFx0XHRyZXR1cm4gbztcblx0XHR9XG5cblx0XHRsZXQgdmFsdWU6IHN0cmluZztcblxuXHRcdHRyeSB7XG5cdFx0XHR2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KCBfdmFsdWUgKTtcblx0XHR9IGNhdGNoICggZXJyb3I6IHVua25vd24gKSB7XG5cdFx0XHRjb25zdCBkZXNjcmlwdGlvbiA9ICdUaGlzIHZhbHVlIHR5cGUgaXMgbm90IHN1cHBvcnRlZCBieSBKU09OLnN0cmluZ2lmeSc7XG5cdFx0XHRjb25zdCB7XG5cdFx0XHRcdHN0YWNrLFxuXHRcdFx0XHRtZXNzYWdlXG5cdFx0XHR9ID0gZXJyb3IgYXMgRXJyb3I7XG5cblx0XHRcdHZhbHVlID0gSlNPTi5zdHJpbmdpZnkoIHtcblx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdHN0YWNrLFxuXHRcdFx0XHRtZXNzYWdlXG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0byArPSBgXCIke25hbWV9XCI6JHt2YWx1ZX0sYDtcblx0XHRyZXR1cm4gbztcblxuXHR9LCAneycgKVxuXHRcdC5yZXBsYWNlKCAvLCQvLCAnfScgKTtcblxufTtcbiJdfQ==